<!DOCTYPE html><html class="theme-next gemini use-motion" lang="en"><head><meta name="generator" content="Hexo 3.9.0"><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=2"><meta name="theme-color" content="#222"><link rel="stylesheet" href="/blog/lib/font-awesome/css/font-awesome.min.css?v=4.7.0"><link rel="stylesheet" href="/blog/css/main.css?v=7.2.0"><link rel="apple-touch-icon" sizes="180x180" href="/blog/images/favicon/apple-touch-icon.png?v=7.2.0"><link rel="icon" type="image/png" sizes="32x32" href="/blog/images/favicon/favicon-32x32.png?v=7.2.0"><link rel="icon" type="image/png" sizes="16x16" href="/blog/images/favicon/favicon-16x16.png?v=7.2.0"><link rel="mask-icon" href="/blog/images/favicon/safari_pinned_tab.svg?v=7.2.0" color="#222"><meta name="msapplication-config" content="/blog/images/favicon/browserconfig.xml"><script id="hexo.configurations">var NexT=window.NexT||{},CONFIG={root:"/blog/",scheme:"Gemini",version:"7.2.0",sidebar:{position:"left",display:"post",offset:12,onmobile:!1},back2top:{enable:!0,sidebar:!0,scrollpercent:!0},copycode:{enable:!0,show_result:!1,style:null},fancybox:!1,fastclick:!1,lazyload:!1,tabs:!0,motion:{enable:!0,async:!1,transition:{post_block:"fadeIn",post_header:"slideDownIn",post_body:"slideDownIn",coll_header:"slideLeftIn",sidebar:"slideUpIn"}},algolia:{applicationID:"",apiKey:"",indexName:"",hits:{per_page:10},labels:{input_placeholder:"Search for Posts",hits_empty:"We didn't find any results for the search: ${query}",hits_stats:"${hits} results found in ${time} ms"}},translation:{copy_button:"Copy",copy_success:"Copied",copy_failure:"Copy failed"}}</script><meta name="description" content="We all know that DBMS (database management system) is used to store (a massive amount of) data. However, have you ever wondered how is data stored in DBMS? In this post, we will focus on data storage"><meta name="keywords" content="Niu,Yunpeng,NUS,CS,Software,Developer"><meta property="og:type" content="article"><meta property="og:title" content="Understanding How is Data Stored in RDBMS"><meta property="og:url" content="https://yunpengn.github.io/blog/2019/01/20/understanding-database-storage/index.html"><meta property="og:site_name" content="Yunpeng&#39;s Blog"><meta property="og:description" content="We all know that DBMS (database management system) is used to store (a massive amount of) data. However, have you ever wondered how is data stored in DBMS? In this post, we will focus on data storage"><meta property="og:locale" content="en"><meta property="og:image" content="https://yunpengn.github.io/blog/images/memory_hierarchy.jpg"><meta property="og:updated_time" content="2019-07-13T09:42:23.414Z"><meta name="twitter:card" content="summary"><meta name="twitter:title" content="Understanding How is Data Stored in RDBMS"><meta name="twitter:description" content="We all know that DBMS (database management system) is used to store (a massive amount of) data. However, have you ever wondered how is data stored in DBMS? In this post, we will focus on data storage"><meta name="twitter:image" content="https://yunpengn.github.io/blog/images/memory_hierarchy.jpg"><link rel="alternate" href="/blog/atom.xml" title="Yunpeng's Blog" type="application/atom+xml"><link rel="canonical" href="https://yunpengn.github.io/blog/2019/01/20/understanding-database-storage/"><script id="page.configurations">CONFIG.page={sidebar:""}</script><title>Understanding How is Data Stored in RDBMS | Yunpeng's Blog</title><script async src="https://www.googletagmanager.com/gtag/js?id=UA-92228484-1"></script><script>var host=window.location.hostname;if("localhost"!==host){function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","UA-92228484-1")}</script><noscript><style>.sidebar-inner,.use-motion .brand,.use-motion .collection-title,.use-motion .comments,.use-motion .menu-item,.use-motion .motion-element,.use-motion .pagination,.use-motion .post-block,.use-motion .post-body,.use-motion .post-header{opacity:initial}.use-motion .logo,.use-motion .site-subtitle,.use-motion .site-title{opacity:initial;top:initial}.use-motion .logo-line-before i{left:initial}.use-motion .logo-line-after i{right:initial}</style></noscript></head><body itemscope itemtype="http://schema.org/WebPage" lang="en"><div class="container sidebar-position-left page-post-detail"><div class="headband"></div><header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader"><div class="header-inner"><div class="site-brand-wrapper"><div class="site-meta"><div class="custom-logo-site-title"><a href="/blog/" class="brand" rel="start"><span class="logo-line-before"><i></i></span> <span class="site-title">Yunpeng's Blog</span> <span class="logo-line-after"><i></i></span></a></div><p class="site-subtitle">Life, coding and everything</p></div><div class="site-nav-toggle"><button aria-label="Toggle navigation bar"><span class="btn-bar"></span> <span class="btn-bar"></span> <span class="btn-bar"></span></button></div></div><nav class="site-nav"><ul id="menu" class="menu"><li class="menu-item menu-item-home"><a href="/blog/" rel="section"><i class="menu-item-icon fa fa-fw fa-home"></i><br>Home</a></li><li class="menu-item menu-item-categories"><a href="/blog/categories/" rel="section"><i class="menu-item-icon fa fa-fw fa-th"></i><br>Categories</a></li><li class="menu-item menu-item-archives"><a href="/blog/archives/" rel="section"><i class="menu-item-icon fa fa-fw fa-archive"></i><br>Archives</a></li><li class="menu-item menu-item-about"><a href="/blog/about/" rel="section"><i class="menu-item-icon fa fa-fw fa-user"></i><br>About</a></li></ul></nav></div></header><main id="main" class="main"><div class="main-inner"><div class="content-wrap"><div id="content" class="content"><div id="posts" class="posts-expand"><article class="post post-type-normal" itemscope itemtype="http://schema.org/Article"><div class="post-block"><link itemprop="mainEntityOfPage" href="https://yunpengn.github.io/blog/blog/2019/01/20/understanding-database-storage/"><span hidden itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="name" content="Niu Yunpeng"><meta itemprop="description" content="The world never stops for you."><meta itemprop="image" content="/blog/images/avatar_cropped.jpg"></span><span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content="Yunpeng's Blog"></span><header class="post-header"><h1 class="post-title" itemprop="name headline">Understanding How is Data Stored in RDBMS</h1><div class="post-meta"><span class="post-meta-item"><span class="post-meta-item-icon"><i class="fa fa-calendar-o"></i> </span><span class="post-meta-item-text">Posted on</span> <time title="Created: 2019-01-20 21:16:19" itemprop="dateCreated datePublished" datetime="2019-01-20T21:16:19+08:00">2019-01-20</time> </span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="fa fa-calendar-check-o"></i> </span><span class="post-meta-item-text">Edited on</span> <time title="Modified: 2019-07-13 17:42:23" itemprop="dateModified" datetime="2019-07-13T17:42:23+08:00">2019-07-13</time> </span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="fa fa-folder-o"></i> </span><span class="post-meta-item-text">In</span> <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/blog/categories/Technical/" itemprop="url" rel="index"><span itemprop="name">Technical</span></a></span> , <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/blog/categories/Technical/Database/" itemprop="url" rel="index"><span itemprop="name">Database</span></a></span> , <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/blog/categories/Technical/Database/SQL/" itemprop="url" rel="index"><span itemprop="name">SQL</span></a></span> </span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="fa fa-comment-o"></i> </span><span class="post-meta-item-text">Comments: </span><a href="/blog/2019/01/20/understanding-database-storage/#comments" itemprop="discussionUrl"><span class="post-comments-count disqus-comment-count" data-disqus-identifier="2019/01/20/understanding-database-storage/" itemprop="commentCount"></span></a></span><br></div></header><div class="post-body" itemprop="articleBody"><p>We all know that DBMS <em>(database management system)</em> is used to store (a massive amount of) data. However, have you ever wondered how is data stored in DBMS? In this post, we will focus on data storage in RDBMS, the most traditional relational database systems.</p><h2 id="Physical-Storage"><a href="#Physical-Storage" class="headerlink" title="Physical Storage"></a>Physical Storage</h2><p>Data can be stored in many different kinds of medium or devices, from the fastest but costy registers to the slow but cheap hard drives, or even magnetic tapes. Nowadays, <a href="https://en.wikipedia.org/wiki/Infrastructure_as_a_service" target="_blank" rel="noopener">IaaS</a> providers such as <a href="https://aws.amazon.com" target="_blank" rel="noopener">AWS</a> even provides services such as <a href="https://aws.amazon.com/glacier/" target="_blank" rel="noopener">S3 Glacier</a> as a low-cost archiving storage solution. The diagram below shows the memory hierarchy of common devices.</p><img src="/blog/images/memory_hierarchy.jpg" width="500" title="Memory hierarchy"><a id="more"></a><p>In the hierarchy diagram above, the devices in the lower part of the diagram tends to have a larger storage capacity, slower transfer rate but cheaper price. However, this seems contradictory to the requirements for almost any system: to lower the cost, as well as to improve the performance. To solve such dilemma, most RDBMS (and many other software as well) would try to: store data that are more frequently accessed in a faster memory device (such as main memory and even higher level cache) but store less frequently accesses data in a slower medium (such as hard drive). Specifically, RDMS uses hard drive as the persistent layer while use main memory to store that is currently being processed.</p><p>Apart from that, we should also consider how to organize files to enable more efficient retrieval of information. Due to such two-way transfer between hard drive and main memory, the cost of page I/O dominates the cost of almost all relational database operations. Usually, a page is around 4KB or 8KB. When we calculate the time complexity of a certain query, we would directly use the I/O time to estimate the overall time (i.e., we would omit the CPU cost). Also, later we would use a term rid <em>(record id)</em> which could uniquely identify a record’s disk address. For ease of optimization, all transfer between hard drive and main memory would be managed by the buffer manager. At a slightly lower layer, disk space manager would control the usage of disk pages.</p><h2 id="File-amp-Index"><a href="#File-amp-Index" class="headerlink" title="File &amp; Index"></a>File &amp; Index</h2><p>In RDBMS, a collection of records becomes a file, which could in turn be stored in one or more pages on the hard disk. A file is implemented by the files and access methods layer, and support the scan operation. The file layer keeps track of those records being inserted or deleted, so that it knows whether to request for new pages or how much free space is available in the file. There are a few different file structures. The simplest file structure is a <em>heap file</em>, unordered. It stores all records in random order acroos all pages allocated to the file.</p><p>To optimize retrieval performance, we could use <strong>index</strong>, a data structure to allow efficient retrieval of records satisfying certain conditions on the <em>search key</em> fields of that index. Usually, an index could be a better alternative of storing sorted file when the predicate is an equality check. Notice that index itself is also stored as a file (i.e., the index consists of a collection of records). These records of an index are called <strong>data entries</strong>, while the actual underlying records are called <strong>data records</strong>. However, there are actually some alternatives. Three of them are listed below:</p><ul><li><em>Alternative 1:</em> a data entry contains the actual data record;</li><li><em>Alternative 2:</em> a data entry is a <code>&lt;k, rid&gt;</code> pair, where <code>k</code> is the search key value and <code>rid</code> is the record id of the data record;</li><li><em>Alternative 3:</em> a data entry is a <code>&lt;k, rid-list&gt;</code> pair, where <code>rid-list</code> is a list of record ids satisfying the search key value <code>k</code>.</li></ul><p>Notice that the later two alternatives could be thought of, effectively contains a pointer to the actual data record. If we want to build multiple indexes on the same relation, at most one of them could use <em>alternative 1</em>.</p><p>When a file is organized so that the ordering of data records is the same as or similar to that of data entries for an index, we say it is a clustered index; otherwise, it is an unclustered index. An index using <em>alternative 1</em> is by default clustered. For <em>alternative 2</em> or <em>alternative 3</em>, the index is only clustered if the data records are sorted on the search key field(s). In practice, files are rarely kept sorted because it is really hard to maintain such ordering. Thus, clustered indexes are mostly using <em>alternative 1</em>. Notice that the cost to answer a range search query could increase a lot if the index is unclustered.</p><h2 id="Errata"><a href="#Errata" class="headerlink" title="Errata"></a>Errata</h2><ul><li>On Page 277, <code>otherwise, it clustered is an unclustered index</code> should be changed to <code>otherwise, it is an unclustered index</code>.</li></ul><h2 id="References"><a href="#References" class="headerlink" title="References"></a>References</h2><ul><li><a href="http://pages.cs.wisc.edu/~dbbook/" target="_blank" rel="noopener">Database Management Systems (3rd edition)</a></li></ul></div><div><ul class="post-copyright"><li class="post-copyright-author"><strong>Post author: </strong>Niu Yunpeng</li><li class="post-copyright-link"><strong>Post link: </strong><a href="https://yunpengn.github.io/blog/2019/01/20/understanding-database-storage/" title="Understanding How is Data Stored in RDBMS">https://yunpengn.github.io/blog/2019/01/20/understanding-database-storage/</a></li><li class="post-copyright-license"><strong>Copyright Notice: </strong>All articles in this blog are licensed under <a href="https://creativecommons.org/licenses/by-nc-nd/4.0/" rel="noopener" target="_blank"><i class="fa fa-fw fa-creative-commons"></i>BY-NC-ND</a> unless stating additionally.</li></ul></div><footer class="post-footer"><div class="post-nav"><div class="post-nav-next post-nav-item"><a href="/blog/2019/01/05/relational-operators/" rel="next" title="Evaluation & Implementation of Relational Operators"><i class="fa fa-chevron-left"></i> Evaluation & Implementation of Relational Operators</a></div><span class="post-nav-divider"></span><div class="post-nav-prev post-nav-item"><a href="/blog/2019/02/07/how-query-optimizer-works/" rel="prev" title="How Query Optimizer Works in RDBMS">How Query Optimizer Works in RDBMS <i class="fa fa-chevron-right"></i></a></div></div></footer></div></article></div></div><div class="comments" id="comments"><div id="disqus_thread"><noscript>Please enable JavaScript to view the comments powered by Disqus.</noscript></div></div></div><div class="sidebar-toggle"><div class="sidebar-toggle-line-wrap"><span class="sidebar-toggle-line sidebar-toggle-line-first"></span> <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span> <span class="sidebar-toggle-line sidebar-toggle-line-last"></span></div></div><aside id="sidebar" class="sidebar"><div class="sidebar-inner"><ul class="sidebar-nav motion-element"><li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap">Table of Contents</li><li class="sidebar-nav-overview" data-target="site-overview-wrap">Overview</li></ul><div class="site-overview-wrap sidebar-panel"><div class="site-overview"><div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person"><img class="site-author-image" itemprop="image" src="/blog/images/avatar_cropped.jpg" alt="Niu Yunpeng"><p class="site-author-name" itemprop="name">Niu Yunpeng</p><div class="site-description motion-element" itemprop="description">The world never stops for you.</div></div><nav class="site-state motion-element"><div class="site-state-item site-state-posts"><a href="/blog/archives/"><span class="site-state-item-count">11</span> <span class="site-state-item-name">posts</span></a></div><div class="site-state-item site-state-categories"><a href="/blog/categories/"><span class="site-state-item-count">8</span> <span class="site-state-item-name">categories</span></a></div></nav><div class="feed-link motion-element"><a href="/blog/atom.xml" rel="alternate"><i class="fa fa-rss"></i> RSS</a></div><div class="links-of-author motion-element"><span class="links-of-author-item"><a href="https://github.com/yunpengn" title="GitHub &rarr; https://github.com/yunpengn" rel="noopener" target="_blank"><i class="fa fa-fw fa-github"></i>GitHub</a> </span><span class="links-of-author-item"><a href="https://www.facebook.com/NeilNiuYunpeng" title="Facebook &rarr; https://www.facebook.com/NeilNiuYunpeng" rel="noopener" target="_blank"><i class="fa fa-fw fa-facebook"></i>Facebook</a> </span><span class="links-of-author-item"><a href="https://sg.linkedin.com/in/yunpeng-niu/en" title="LinkedIn &rarr; https://sg.linkedin.com/in/yunpeng-niu/en" rel="noopener" target="_blank"><i class="fa fa-fw fa-linkedin"></i>LinkedIn</a> </span><span class="links-of-author-item"><a href="https://yunpengn.github.io/" title="Website &rarr; https://yunpengn.github.io/"><i class="fa fa-fw fa-globe"></i>Website</a></span></div><div class="cc-license motion-element" itemprop="license"><a href="https://creativecommons.org/licenses/by-nc-nd/4.0/" class="cc-opacity" rel="noopener" target="_blank"><img src="/blog/images/cc-by-nc-nd.svg" alt="Creative Commons"></a></div></div></div><div class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active"><div class="post-toc"><div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#Physical-Storage"><span class="nav-number">1.</span> <span class="nav-text">Physical Storage</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#File-amp-Index"><span class="nav-number">2.</span> <span class="nav-text">File &amp; Index</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Errata"><span class="nav-number">3.</span> <span class="nav-text">Errata</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#References"><span class="nav-number">4.</span> <span class="nav-text">References</span></a></li></ol></div></div></div><div class="back-to-top motion-element"><i class="fa fa-arrow-up"></i> <span id="scrollpercent"><span>0</span>%</span></div></div></aside><div id="sidebar-dimmer"></div></div></main><footer id="footer" class="footer"><div class="footer-inner"><div class="copyright">&copy; 2017 – <span itemprop="copyrightYear">2019</span> <span class="with-love" id="animate"><i class="fa fa-heart"></i> </span><span class="author" itemprop="copyrightHolder"><a href="https://yunpengn.github.io/" class="theme-link" rel="author" target="_blank">Niu Yunpeng</a></span></div><div class="powered-by">Powered by <a href="https://hexo.io" class="theme-link" rel="noopener" target="_blank">Hexo</a> v3.9.0</div><span class="post-meta-divider">|</span><div class="theme-info">Theme – <a href="https://theme-next.org" class="theme-link" rel="noopener" target="_blank">NexT.Gemini</a> v7.2.0</div></div></footer></div><script>"[object Function]"!==Object.prototype.toString.call(window.Promise)&&(window.Promise=null)</script><script src="/blog/lib/jquery/index.js?v=3.4.1"></script><script src="/blog/lib/velocity/velocity.min.js?v=1.2.1"></script><script src="/blog/lib/velocity/velocity.ui.min.js?v=1.2.1"></script><script src="/blog/js/utils.js?v=7.2.0"></script><script src="/blog/js/motion.js?v=7.2.0"></script><script src="/blog/js/affix.js?v=7.2.0"></script><script src="/blog/js/schemes/pisces.js?v=7.2.0"></script><script src="/blog/js/scrollspy.js?v=7.2.0"></script><script src="/blog/js/post-details.js?v=7.2.0"></script><script src="/blog/js/next-boot.js?v=7.2.0"></script><script>function loadCount(){var d=document,n=d.createElement("script");n.src="https://yunpeng.disqus.com/count.js",n.id="dsq-count-scr",(d.head||d.body).appendChild(n)}window.addEventListener("load",loadCount,!1)</script><script>var disqus_config=function(){this.page.url="https://yunpengn.github.io/blog/2019/01/20/understanding-database-storage/",this.page.identifier="2019/01/20/understanding-database-storage/",this.page.title="Understanding How is Data Stored in RDBMS"};function loadComments(){var t=document,e=t.createElement("script");e.src="https://yunpeng.disqus.com/embed.js",e.setAttribute("data-timestamp",""+ +new Date),(t.head||t.body).appendChild(e)}window.addEventListener("load",loadComments,!1)</script></body></html>